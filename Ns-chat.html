<!-- HTML Structure -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Netshield Chatroom</title>
    <style>
        /* Tab Bar Styles */
        #tab-bar {
            display: flex;
            align-items: center;
            background-color: #333;
            padding: 10px;
        }
        #tab-bar button {
            margin: 0 5px;
            padding: 10px 15px;
            background-color: #555;
            color: white;
            border: none;
            cursor: pointer;
        }
        #tab-bar button:hover {
            background-color: #777;
        }

        /* Chatroom Popup Styles */
        #chatroom-popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 400px;
            max-width: 90%;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px;
            border-radius: 10px;
            z-index: 1000;
        }
        #chatroom-popup h2 {
            margin-top: 0;
        }
        #chatroom-popup .messages {
            height: 200px;
            overflow-y: auto;
            border: 1px solid #555;
            padding: 10px;
            margin-bottom: 10px;
            background-color: #222;
        }
        #chatroom-popup input[type="text"] {
            width: 80%;
            padding: 5px;
        }
        #chatroom-popup button {
            padding: 5px 10px;
            margin-left: 5px;
        }
        #chatroom-popup .close-btn {
            position: absolute;
            top: 5px;
            right: 10px;
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <!-- Tab Bar -->
    <div id="tab-bar">
        <img src="assets/logo.png" alt="Tab Icon" id="tab-icon">
        <button onclick="window.location.href='home.html'">Home</button>
        <button onclick="window.location.href='doge-unblocker.html'">Doge-Unblocker</button>
        <button onclick="window.location.href='holy-unblocker.html'">Holy-Unblocker</button>
        <button onclick="window.location.href='Interstellar.html'">Interstellar</button>
        <button onclick="window.location.href='Ultraviolet.html'">Ultraviolet</button>
        <button onclick="window.location.href='Information.html'">Info</button>
        <button id="chatroom-btn">Netshield Chatroom</button>
    </div>

    <!-- Chatroom Popup -->
    <div id="chatroom-popup">
        <button class="close-btn" onclick="toggleChatroom()">Ã—</button>
        <h2>Netshield Chatroom</h2>
        <div>Active Users: <span id="user-count">0</span></div>
        <div class="messages" id="chat-messages"></div>
        <input type="text" id="chat-input" placeholder="Type your message...">
        <button onclick="sendMessage()">Send</button>
    </div>

    <script>
        // Toggle Chatroom Popup
        const chatroomBtn = document.getElementById('chatroom-btn');
        const chatroomPopup = document.getElementById('chatroom-popup');
        const chatMessages = document.getElementById('chat-messages');
        const chatInput = document.getElementById('chat-input');
        const userCount = document.getElementById('user-count');

        let socket;

        chatroomBtn.addEventListener('click', toggleChatroom);

        function toggleChatroom() {
            if (chatroomPopup.style.display === 'none' || chatroomPopup.style.display === '') {
                chatroomPopup.style.display = 'block';
                initializeWebSocket();
            } else {
                chatroomPopup.style.display = 'none';
                if (socket) {
                    socket.close();
                }
            }
        }

        function initializeWebSocket() {
            // Replace with your WebSocket server URL
            const wsUrl = 'wss://your-websocket-server.com';
            socket = new WebSocket(wsUrl);

            socket.onopen = () => {
                console.log('Connected to WebSocket server');
            };

            socket.onmessage = (event) => {
                const data = JSON.parse(event.data);
                if (data.type === 'message') {
                    const messageElement = document.createElement('div');
                    messageElement.textContent = data.content;
                    chatMessages.appendChild(messageElement);
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                } else if (data.type === 'userCount') {
                    userCount.textContent = data.count;
                }
            };

            socket.onclose = () => {
                console.log('Disconnected from WebSocket server');
            };

            socket.onerror = (error) => {
                console.error('WebSocket error:', error);
            };
        }

        function sendMessage() {
            const message = chatInput.value.trim();
            if (message && socket && socket.readyState === WebSocket.OPEN) {
                const data = {
                    type: 'message',
                    content: message
                };
                socket.send(JSON.stringify(data));
                chatInput.value = '';
            }
        }
    </script>
</body>
</html>
